{"remainingRequest":"/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/app/src/components/BookForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/app/src/components/BookForm.vue","mtime":1586122746000},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7bWFwR2V0dGVycywgbWFwQWN0aW9ucyB9IGZyb20gJ3Z1ZXgnCmltcG9ydCBCb29rSW5mbyBmcm9tICdAL2NvbXBvbmVudHMvQm9va0luZm8udnVlJwppbXBvcnQgeyBVUERBVEVfQ1VSUkVOVCB9IGZyb20gJ0Avc3RvcmUvbXV0YXRpb24tdHlwZXMnCi8vaW1wb3J0IHsgVVBEQVRFX0NVUlJFTlQsIFVQREFURV9CT09LLCBERUxFVEVfQk9PSyB9IGZyb20gJ0Avc3RvcmUvbXV0YXRpb24tdHlwZXMnCgppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwppbXBvcnQgbWFya2VkIGZyb20gJ21hcmtlZCcKCmV4cG9ydCBkZWZhdWx0IHsKIG5hbWU6ICdib29rLWZvcm0nLAogY29tcG9uZW50czogewogIEJvb2tJbmZvCiB9LAogZGF0YSgpIHsKICByZXR1cm4gewogICBib29rOiB7fSwKICAgZm9ybTogewogICAgbWVtbzogJycKICAgfSwKICAgcnVsZXM6IHsKICAgIG1lbW86IFsKICAgICAvL3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICdJbnB1dCBtZW1vLicsIHRyaWdnZXI6ICdibHVyJyB9CiAgICBdCiAgIH0KICB9CiB9LAogY29tcHV0ZWQ6IHsKICAuLi5tYXBHZXR0ZXJzKCBbICdjdXJyZW50JyBdKSwKICAvLy4uLm1hcEdldHRlcnMoIFsgJ2N1cnJlbnQnLCAnZ2V0Qm9va0J5SWQnIF0pLAogIG1lbW9tYXJrOiBmdW5jdGlvbigpewogICByZXR1cm4gbWFya2VkKHRoaXMuYm9vay5tZW1vKQogICAvL3JldHVybiBtYXJrZWQodGhpcy5mb3JtLm1lbW8pCiAgfQogfSwKIGNyZWF0ZWQoKSB7CiAgaWYgKCF0aGlzLmN1cnJlbnQpIHsKICAgdGhpcy4kcm91dGVyLnB1c2goJy8nKQogIH0KICB0aGlzLmJvb2sgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmN1cnJlbnQpCiB9LAogbW91bnRlZCgpIHsKICAvL2xldCBiID0gdGhpcy5nZXRCb29rQnlJZCh0aGlzLmJvb2suaWQpCiAvLyBpZiAoYikgewogICAvL3RoaXMuZm9ybS5yZWFkID0gYi5yZWFkCiAgIC8vdGhpcy5mb3JtLm1lbW8gPSB0aGlzLmN1cnJlbnQubWVtbwogIC8vfQogfSwKIG1ldGhvZHM6IHsKIC8vIC4uLm1hcEFjdGlvbnMoW1VQREFURV9CT09LLCBVUERBVEVfQ1VSUkVOVCwgREVMRVRFX0JPT0tdKSwKICAuLi5tYXBBY3Rpb25zKFsgVVBEQVRFX0NVUlJFTlRdKSwKICBvbnN1Ym1pdCgpIHsKICAgLy90aGlzLiRyZWZzWydmb3JtJ10udmFsaWRhdGUoKHZhbGlkKSA9PiB7CiAgIC8vIGlmICh2YWxpZCkgewogICAgLyogdGhpc1tVUERBVEVfQk9PS10oCiAgICAgIE9iamVjdC5hc3NpZ24oe30sIHRoaXMuYm9vaywgdGhpcy5mb3JtKQogICAgICkqLwoKICAgICAvL1VQREFURSBtZXRob2QKICAgICAgY29uc3QgcGFyYW1zID0gewogICAgICAgdWlkOiB0aGlzLmJvb2suaWQsCiAgICAgICB0aXRsZTogdGhpcy5ib29rLnRpdGxlLAogICAgICAgYXV0aG9yOiB0aGlzLmJvb2suYXV0aG9yLAogICAgICAgcHJpY2U6IFN0cmluZyh0aGlzLmJvb2sucHJpY2UpLAogICAgICAgcHVibGlzaGVyOiB0aGlzLmJvb2sucHVibGlzaGVyLAogICAgICAgcHVibGlzaGVkOiB0aGlzLmJvb2sucHVibGlzaGVkLAogICAgICAgaW1hZ2U6IHRoaXMuYm9vay5pbWFnZSwKICAgICAgIGltYWdldHlwZTogdGhpcy5ib29rLmltYWdldHlwZSwKICAgICAgIHVybDogdGhpcy5ib29rLnVybCwKICAgICAgIG1lbW86IHRoaXMuYm9vay5tZW1vCiAgICAgIH0KICAgICBheGlvcy5wb3N0KCdodHRwOi8vbG9jYWxob3N0Ojg4ODgvY3JlYXRlJywgcGFyYW1zICkKCiAgICAgdGhpc1tVUERBVEVfQ1VSUkVOVF0obnVsbCkKICAgICB0aGlzLiRub3RpZnkoewogICAgICB0aXRsZTogJ1JlYWRpbmcgUmVjb3JkZXInLAogICAgICBtZXNzYWdlOiB0aGlzLiRjcmVhdGVFbGVtZW50KCdwJywge3N0eWxlOiAnY29sb3I6ICMwMDknfSwKICAgICAgICdTdWNjZXNzIScpLAogICAgICAgZHVyYXRpb246IDIwMDAKICAgICB9KQogICAgIC8vdGhpcy5mb3JtLnJlYWQgPSBuZXcgRGF0ZSgpCiAgICAgLy90aGlzLmZvcm0ubWVtbyA9ICcnCiAgICAgdGhpcy4kcm91dGVyLnB1c2goJy8nKQogICAgLy99CiAgIC8vfSkKICB9LAogIG9uZGVsZXRlKCkgewogICAvL3RoaXMuJHJlZnNbJ2Zvcm0nXS52YWxpZGF0ZSgodmFsaWQpID0+IHsKICAgLy8gaWYgKHZhbGlkKSB7CiAgICAvKiB0aGlzW0RFTEVURV9CT09LXSgKICAgICAgT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5ib29rLCB0aGlzLmZvcm0pCiAgICAgKSovCgogICAgIC8vREVMRVRFIG1ldGhvZAogICAgIGF4aW9zLmRlbGV0ZSgnaHR0cDovL2xvY2FsaG9zdDo4ODg4L2RlbGV0ZT9pZD0nK3RoaXMuY3VycmVudC5pZCkKCiAgICAgdGhpc1tVUERBVEVfQ1VSUkVOVF0obnVsbCkKICAgICB0aGlzLiRub3RpZnkoewogICAgICB0aXRsZTogJ0RlbGV0ZSBEYXRhJywKICAgICAgbWVzc2FnZTogdGhpcy4kY3JlYXRlRWxlbWVudCgncCcsIHtzdHlsZTogJ2NvbG9yOiAjMDA5J30sCiAgICAgICAnU3VjY2VzcyEnKSwKICAgICAgIGR1cmF0aW9uOiAyMDAwCiAgICAgfSkKICAgICAvL3RoaXMuZm9ybS5yZWFkID0gbmV3IERhdGUoKQogICAgIC8vdGhpcy5mb3JtLm1lbW8gPSAnJwogICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvJykKICAgIC8vfQogICAvL30pCiAgfQogfQoKfQo="},{"version":3,"sources":["BookForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAqBA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"BookForm.vue","sourceRoot":"src/components","sourcesContent":["<template>\n <div id=\"form\">\n  <BookInfo :book=\"book\"></BookInfo>\n  <hr />\n  <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"120px\" >\n   <div>\n    <div v-html=\"memomark\" />\n   </div>\n   <el-form-item label=\"メモ\" prop=\"memo\">\n    <el-input type=\"textarea\" size=\"large\" v-model=\"book.memo\"></el-input>\n    <!--<el-input type=\"textarea\" size=\"large\" v-model=\"form.memo\"></el-input> -->\n   </el-form-item>\n   <el-form-item>\n    <el-button type=\"primary\" @click=\"onsubmit\">Register</el-button>\n    <el-button type=\"primary\" @click=\"ondelete\">Delete</el-button>\n   </el-form-item>\n  </el-form>\n </div>\n</template>\n\n<script>\nimport {mapGetters, mapActions } from 'vuex'\nimport BookInfo from '@/components/BookInfo.vue'\nimport { UPDATE_CURRENT } from '@/store/mutation-types'\n//import { UPDATE_CURRENT, UPDATE_BOOK, DELETE_BOOK } from '@/store/mutation-types'\n\nimport axios from \"axios\";\nimport marked from 'marked'\n\nexport default {\n name: 'book-form',\n components: {\n  BookInfo\n },\n data() {\n  return {\n   book: {},\n   form: {\n    memo: ''\n   },\n   rules: {\n    memo: [\n     //{ required: true, message: 'Input memo.', trigger: 'blur' }\n    ]\n   }\n  }\n },\n computed: {\n  ...mapGetters( [ 'current' ]),\n  //...mapGetters( [ 'current', 'getBookById' ]),\n  memomark: function(){\n   return marked(this.book.memo)\n   //return marked(this.form.memo)\n  }\n },\n created() {\n  if (!this.current) {\n   this.$router.push('/')\n  }\n  this.book = Object.assign({}, this.current)\n },\n mounted() {\n  //let b = this.getBookById(this.book.id)\n // if (b) {\n   //this.form.read = b.read\n   //this.form.memo = this.current.memo\n  //}\n },\n methods: {\n // ...mapActions([UPDATE_BOOK, UPDATE_CURRENT, DELETE_BOOK]),\n  ...mapActions([ UPDATE_CURRENT]),\n  onsubmit() {\n   //this.$refs['form'].validate((valid) => {\n   // if (valid) {\n    /* this[UPDATE_BOOK](\n      Object.assign({}, this.book, this.form)\n     )*/\n\n     //UPDATE method\n      const params = {\n       uid: this.book.id,\n       title: this.book.title,\n       author: this.book.author,\n       price: String(this.book.price),\n       publisher: this.book.publisher,\n       published: this.book.published,\n       image: this.book.image,\n       imagetype: this.book.imagetype,\n       url: this.book.url,\n       memo: this.book.memo\n      }\n     axios.post('http://localhost:8888/create', params )\n\n     this[UPDATE_CURRENT](null)\n     this.$notify({\n      title: 'Reading Recorder',\n      message: this.$createElement('p', {style: 'color: #009'},\n       'Success!'),\n       duration: 2000\n     })\n     //this.form.read = new Date()\n     //this.form.memo = ''\n     this.$router.push('/')\n    //}\n   //})\n  },\n  ondelete() {\n   //this.$refs['form'].validate((valid) => {\n   // if (valid) {\n    /* this[DELETE_BOOK](\n      Object.assign({}, this.book, this.form)\n     )*/\n\n     //DELETE method\n     axios.delete('http://localhost:8888/delete?id='+this.current.id)\n\n     this[UPDATE_CURRENT](null)\n     this.$notify({\n      title: 'Delete Data',\n      message: this.$createElement('p', {style: 'color: #009'},\n       'Success!'),\n       duration: 2000\n     })\n     //this.form.read = new Date()\n     //this.form.memo = ''\n     this.$router.push('/')\n    //}\n   //})\n  }\n }\n\n}\n</script>\n\n<style scoped>\n#form {\n margin-top: 15px;\n}\n</style>\n"]}]}