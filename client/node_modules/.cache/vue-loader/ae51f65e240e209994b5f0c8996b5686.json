{"remainingRequest":"/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/app/src/views/Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"/app/src/views/Home.vue","mtime":1586110491000},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBCb29rSW5mbyBmcm9tICdAL2NvbXBvbmVudHMvQm9va0luZm8udnVlJwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdIb21lJywKICBkYXRhKCkgewogICByZXR1cm4gewogICAgYm9va3M6IFtdLAogICAgYWxsYm9va3M6IFtdLAogICAgaW5pdF9udW06IDAKICAgfQogIH0sCiAgY29tcG9uZW50czogewogICBCb29rSW5mbwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgYm9va0NvdW50KCkgewogICAgcmV0dXJuIHRoaXMuYWxsYm9va3MubGVuZ3RoCiAgIH0sCiAgLyogZ2V0UmFuZ2VCeVBhZ2U6IGZ1bmN0aW9uKHBhZ2UpewogICAgY29uc3QgU0laRSA9IDMgCiAgICByZXR1cm4gdGhpcy5hbGxib29rcy5zbGljZSggKHBhZ2UtMSkqU0laRSAsIChwYWdlLTEpKlNJWkUrU0laRSkKICAgfSovCiAgfSwKICBtZXRob2RzOiB7CiAgb25jaGFuZ2UocGFnZSkgewogICAgY29uc3QgU0laRSA9IDMgCiAgICB0aGlzLmJvb2tzID0gdGhpcy5hbGxib29rcy5zbGljZSggKHBhZ2UtMSkqU0laRSAsIHBhZ2UqU0laRSApCiAgICAvL3RoaXMuYm9va3MgPSB0aGlzLmdldFJhbmdlQnlQYWdlKHBhZ2UpCiAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICAgYXhpb3MuZ2V0KCJodHRwOi8vbG9jYWxob3N0Ojg4ODgvbGlzdCIpCiAgICAudGhlbiggcmVzID0+IHsgcmV0dXJuICAgcmVzLmRhdGEuaXRlbXMgfSApCiAgICAudGhlbiggZGF0YSA9PiB7CiAgICAgbGV0IGFsbGJvb2sgPSBbXQogICAgIGZvcihsZXQgYiBvZiBkYXRhICl7CiAgICAgICBhbGxib29rLnB1c2goCiAgICAgICB7CiAgICAgICAgaWQ6IGIudWlkLAoJdGl0bGU6IGIudGl0bGUsCglhdXRob3I6IGIuYXV0aG9yLAoJcHJpY2U6IGIucHJpY2UsCglwdWJsaXNoZXI6IGIucHVibGlzaGVyLAoJcHVibGlzaGVkOiBiLnB1Ymxpc2hlZCwKCWltYWdlOiBiLmltYWdlLAoJaW1hZ2V0eXBlOiBiLmltYWdldHlwZSwKCXVybDogYi51cmwsCgltZW1vOiBiLm1lbW8KICAgICAgIH0KICAgICAgICkKICAgICB9CiAgICAgdGhpcy5hbGxib29rcyA9IGFsbGJvb2sKICAgICB0aGlzLmluaXRfbnVtID0gdGhpcy5hbGxib29rcy5sZW5ndGgKICAgICBjb25zdCBTSVpFID0gMwogICAgIHRoaXMuYm9va3MgPSB0aGlzLmFsbGJvb2tzLnNsaWNlKCAwLCBTSVpFICkKICAgIH0pCiAgfSwKICBjcmVhdGVkOiAgZnVuY3Rpb24oKXsKICAgbGV0IHRoYXQgPSB0aGlzOy8vc2V0SW50ZXJ2YWzlhoXjgafjga90aGlz44GMdnVl44Kk44Oz44K544K/44Oz44K544GL44KJ44Kw44Ot44O844OQ44Or44Kq44OW44K444Kn44Kv44OI44Gr5aSJ5YyW44GZ44KLCiAgIHZhciBjaGVja190aW1lID0gWzEwMDAsMjAwMCwzMDAwLDUwMDAsNzAwMCw5MDAwLDEwMDAwLDEyMDAwLDE1MDAwLDIwMDAwXTsKICAgZm9yKGxldCB0IG9mIGNoZWNrX3RpbWUgKXsKICAgIHRoaXMudGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7CiAgIGF4aW9zLmdldCgiaHR0cDovL2xvY2FsaG9zdDo4ODg4L2xpc3QiKQogICAgLnRoZW4oIHJlcyA9PiB7IHJldHVybiAgIHJlcy5kYXRhLm51bSB9ICkKICAgIC8qLnRoZW4oIGRhdGEgPT4gewogICAgIGxldCBhbGxib29rID0gW10KICAgICBmb3IobGV0IGIgb2YgZGF0YSApewogICAgICAgYWxsYm9vay5wdXNoKAogICAgICAgewogICAgICAgIGlkOiBiLnVpZCwKCXRpdGxlOiBiLnRpdGxlLAoJYXV0aG9yOiBiLmF1dGhvciwKCXByaWNlOiBiLnByaWNlLAoJcHVibGlzaGVyOiBiLnB1Ymxpc2hlciwKCXB1Ymxpc2hlZDogYi5wdWJsaXNoZWQsCglpbWFnZTogYi5pbWFnZSwKCWltYWdldHlwZTogYi5pbWFnZXR5cGUsCgl1cmw6IGIudXJsLAoJbWVtbzogYi5tZW1vCiAgICAgICB9KQogICAgIH0KICAgICB0aGF0LmFsbGJvb2tzID0gYWxsYm9vawogICAgfSkqLwogICAudGhlbiggbnVtID0+IHsKICAgIGlmKCBudW0gIT09IHRoYXQuaW5pdF9udW0gKXsKICAgLy8gYWxlcnQodGhhdC5pbml0X251bSkKICAgLy8gYWxlcnQobnVtKQogICAgIGxvY2F0aW9uLnJlbG9hZCgpCiAgICB9CiAgIH0pCgogICAgICAgfSx0KQogICAgICAgfQogIH0KICAKIAp9Cg=="},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;AAcA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA","file":"Home.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"list\">\n   <div><p> There are {{ bookCount }} books.</p> </div>\n <!--  <div> {{ books }} </div> -->\n   <BookInfo v-for=\"(b, i) of books\"\n    :linkable=\"true\" :book=\"b\" :index=\"i+1\" :key=\"b.isbn\">  </BookInfo>\n    <div>\n     <el-pagination background layout=\"prev, pager, next\"\n      :total=\"bookCount\" :page-size=\"3\" @current-change=\"onchange\"></el-pagination>\n    </div> \n  </div> \n</template>\n\n<script>\nimport BookInfo from '@/components/BookInfo.vue'\nimport axios from \"axios\";\n\nexport default {\n  name: 'Home',\n  data() {\n   return {\n    books: [],\n    allbooks: [],\n    init_num: 0\n   }\n  },\n  components: {\n   BookInfo\n  },\n  computed: {\n   bookCount() {\n    return this.allbooks.length\n   },\n  /* getRangeByPage: function(page){\n    const SIZE = 3 \n    return this.allbooks.slice( (page-1)*SIZE , (page-1)*SIZE+SIZE)\n   }*/\n  },\n  methods: {\n  onchange(page) {\n    const SIZE = 3 \n    this.books = this.allbooks.slice( (page-1)*SIZE , page*SIZE )\n    //this.books = this.getRangeByPage(page)\n   }\n  },\n  mounted() {\n     axios.get(\"http://localhost:8888/list\")\n    .then( res => { return   res.data.items } )\n    .then( data => {\n     let allbook = []\n     for(let b of data ){\n       allbook.push(\n       {\n        id: b.uid,\n\ttitle: b.title,\n\tauthor: b.author,\n\tprice: b.price,\n\tpublisher: b.publisher,\n\tpublished: b.published,\n\timage: b.image,\n\timagetype: b.imagetype,\n\turl: b.url,\n\tmemo: b.memo\n       }\n       )\n     }\n     this.allbooks = allbook\n     this.init_num = this.allbooks.length\n     const SIZE = 3\n     this.books = this.allbooks.slice( 0, SIZE )\n    })\n  },\n  created:  function(){\n   let that = this;//setInterval内ではthisがvueインスタンスからグローバルオブジェクトに変化する\n   var check_time = [1000,2000,3000,5000,7000,9000,10000,12000,15000,20000];\n   for(let t of check_time ){\n    this.timer = setTimeout(function(){\n   axios.get(\"http://localhost:8888/list\")\n    .then( res => { return   res.data.num } )\n    /*.then( data => {\n     let allbook = []\n     for(let b of data ){\n       allbook.push(\n       {\n        id: b.uid,\n\ttitle: b.title,\n\tauthor: b.author,\n\tprice: b.price,\n\tpublisher: b.publisher,\n\tpublished: b.published,\n\timage: b.image,\n\timagetype: b.imagetype,\n\turl: b.url,\n\tmemo: b.memo\n       })\n     }\n     that.allbooks = allbook\n    })*/\n   .then( num => {\n    if( num !== that.init_num ){\n   // alert(that.init_num)\n   // alert(num)\n     location.reload()\n    }\n   })\n\n       },t)\n       }\n  }\n  \n \n}\n</script>\n"]}]}